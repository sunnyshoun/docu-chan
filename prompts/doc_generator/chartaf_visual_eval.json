{
    "name": "chartaf_visual_eval",
    "description": "CHARTAF: VLM directly evaluates chart with binary questions based on diagram type standards",
    "version": "1.1.0",
    "system_prompt": "You are a strict diagram quality inspector. Evaluate the diagram image based on its TYPE-SPECIFIC STANDARDS. Answer YES or NO to each question. Focus on both STRUCTURE correctness and NOTATION compliance.",
    "user_prompt_template": "Evaluate this {diagram_type} diagram by answering each question YES or NO.\n\n=== DIAGRAM INFO ===\nType: {diagram_type}\n\n=== USER REQUEST CONTEXT ===\n{tpa_analysis}\n\n=== DIAGRAM TYPE STANDARDS ===\n\n**FLOWCHART Standards:**\n- Decision/condition nodes MUST be diamond shape (rhombus) ◇\n- Process/action nodes should be rectangles □\n- Start/End nodes should be rounded/stadium shapes (○ or ⬭)\n- Clear directional flow (top-to-bottom OR left-to-right)\n- Start at top/left, End at bottom/right\n- Yes/No or True/False labels on decision branches\n- NO scattered or random node placement\n\n**SEQUENCE DIAGRAM Standards:**\n- Participants/actors shown as boxes at the top\n- Vertical lifelines extending downward\n- Messages as horizontal arrows between lifelines\n- Time flows top-to-bottom\n- Activation boxes for active periods\n- Return messages as dashed arrows\n\n**CLASS DIAGRAM Standards:**\n- Classes as rectangles with 3 compartments (name/attributes/methods)\n- Inheritance: hollow triangle arrow (△) pointing to parent\n- Association: solid line with optional arrows\n- Composition: filled diamond (◆) at container end\n- Aggregation: hollow diamond (◇) at container end\n- Multiplicity labels (1, *, 0..1, etc.)\n\n**STATE DIAGRAM Standards:**\n- States as rounded rectangles\n- Initial state: filled circle (●)\n- Final state: bullseye (◉)\n- Transitions as arrows with event/condition labels\n- Clear state names inside boxes\n\n**ER DIAGRAM Standards:**\n- Entities as rectangles\n- Relationships shown with cardinality (1:1, 1:N, M:N)\n- Crow's foot or Chen notation for relationships\n- Primary keys indicated\n- Attributes listed or connected\n\n**GANTT CHART Standards:**\n- Time axis clearly labeled (dates/weeks/months)\n- Tasks as horizontal bars\n- Task names on left side\n- Dependencies shown if applicable\n- Milestones as diamonds or markers\n\n**PIE/DONUT CHART Standards:**\n- Segments clearly distinguishable (colors/patterns)\n- Labels or legend for each segment\n- Percentages or values shown\n- Total should equal 100%\n\n**MIND MAP Standards:**\n- Central topic in the middle\n- Branches radiating outward\n- Hierarchical structure (main → sub-topics)\n- Balanced layout (not all branches on one side)\n\n=== EVALUATION PRINCIPLES ===\n\nJudge based on:\n1. Does it follow the TYPE-SPECIFIC STANDARDS above?\n2. Does it meet the USER'S NEEDS (complexity matches request)?\n3. Is it visually clear and readable?\n\n=== EVALUATION QUESTIONS ===\n\n1. [NOTATION] Does the diagram use correct shapes/symbols for its type (e.g., diamonds for decisions in flowcharts)?\n2. [STRUCTURE] Does the diagram have proper directional flow or layout for its type?\n3. [STRUCTURE] Are elements arranged logically (not scattered randomly)?\n4. [LAYOUT] Are all elements properly spaced without overlapping?\n5. [TEXT] Is all text clearly readable (not too small or cut off)?\n6. [COMPLETENESS] Are all elements fully visible and properly connected?\n7. [APPROPRIATENESS] Does the diagram complexity and detail match the user's request?\n\n=== RESPONSE FORMAT ===\n\nRespond in JSON:\n\n```json\n{\n    \"evaluations\": [\n        {\n            \"id\": 1,\n            \"category\": \"notation\",\n            \"question\": \"Correct shapes/symbols?\",\n            \"answer\": \"YES\" or \"NO\",\n            \"issue\": \"<if NO, describe the problem>\",\n            \"fix\": \"<if NO, suggest Mermaid code fix>\"\n        }\n    ],\n    \"score\": <count of YES / 7, as decimal 0.0-1.0>,\n    \"summary\": \"<one sentence overall assessment>\"\n}\n```",
    "parameters": {
        "temperature": 0.1,
        "max_tokens": 1500
    },
    "input_variables": ["tpa_analysis", "diagram_type", "mermaid_code"],
    "output_format": "json"
}
