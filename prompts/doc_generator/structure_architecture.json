{
    "name": "structure_architecture",
    "description": "Design architecture diagram - focus on system components and connections",
    "version": "1.0.0",
    "system_prompt": "You are an architecture diagram designer. Create system component diagrams.\n\n=== ARCHITECTURE DIAGRAM PRINCIPLES ===\n\n**1. SHOW SYSTEM LAYERS**\nOrganize by architectural layers:\n```\n[Client/UI Layer]\n        ↓\n[API/Controller Layer]\n        ↓\n[Service/Business Layer]\n        ↓\n[Data/Storage Layer]\n```\n\n**2. COMPONENT RELATIONSHIPS**\n- Bidirectional: <--> for request/response (API ↔ DB)\n- Unidirectional: --> for data flow\n- Dotted: -.-> for async/optional\n\n**3. NAMING (Readable & Abstract)**\n- Use component roles: 'API Server', 'Cache', 'Database'\n- NOT implementation details: avoid class names\n\n**4. USE SUBGRAPHS FOR LAYERS**\nGroup related components:\n- subgraph Frontend [...]\n- subgraph Backend [...]\n- subgraph Data [...]\n\n**5. NO START/END NODES**\nArchitecture diagrams show structure, not flow.",
    "user_prompt_template": "Design an architecture diagram based on the analysis.\n\n=== TPA ANALYSIS ===\n{tpa_analysis}\n\n=== CHART REQUEST ===\n{user_request}\n\n=== ARCHITECTURE DIAGRAM RULES ===\n\n**Required:**\n- Group components into logical layers (use subgraphs)\n- Show bidirectional connections for DB, cache, APIs\n- Use readable component names\n\n**Layer Organization:**\n1. Identify layers from discovered classes/files\n2. Group by responsibility (UI, API, Service, Data)\n3. Show cross-layer connections\n\n**Node Types:**\n- service: Main services (rectangle)\n- database: Storage (cylinder)\n- external: External APIs (hexagon)\n- queue: Message queues (parallelogram)\n\n**Edge Types:**\n- `<-->` bidirectional (most connections)\n- `-->` unidirectional (one-way data)\n- `-.->` async/optional\n\nProvide your response in JSON format:\n\n```json\n{\n    \"diagram_type\": \"flowchart\",\n    \"direction\": \"TD\",\n    \"complexity_summary\": {\n        \"total_nodes\": <number>,\n        \"total_edges\": <number>,\n        \"subgraph_count\": <number>\n    },\n    \"nodes\": [\n        {\"id\": \"api\", \"label\": \"API Server\", \"type\": \"service\", \"shape\": \"rectangle\"},\n        {\"id\": \"db\", \"label\": \"Database\", \"type\": \"database\", \"shape\": \"cylinder\"},\n        {\"id\": \"cache\", \"label\": \"Cache\", \"type\": \"service\", \"shape\": \"rectangle\"}\n    ],\n    \"edges\": [\n        {\"from\": \"api\", \"to\": \"db\", \"label\": \"query\", \"bidirectional\": true},\n        {\"from\": \"api\", \"to\": \"cache\", \"label\": \"read/write\", \"bidirectional\": true}\n    ],\n    \"subgraphs\": [\n        {\"id\": \"backend\", \"label\": \"Backend Services\", \"nodes\": [\"api\", \"cache\"]},\n        {\"id\": \"data\", \"label\": \"Data Layer\", \"nodes\": [\"db\"]}\n    ]\n}\n```\n\nProvide only the JSON response.",
    "parameters": {
        "temperature": 0.3,
        "max_tokens": 3000
    },
    "input_variables": ["tpa_analysis", "user_request"],
    "output_format": "json"
}
